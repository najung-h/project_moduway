# 기능정의서

## 문서 개요

본 문서는 LIFE-LEARN의 기능을 앱별로 정리하고, 각 기능의 기술적/비기술적 요구사항을 명확히 정의합니다.
<br>
<br>


## 1. 인증 및 계정 관리 (Accounts)

### 1.1 기능 목록

| 기능 ID | 기능명 | 기능 설명 | 우선순위 |
|---------|--------|-----------|----------|
| A01 | 회원가입 | 이메일 기반 회원가입 | 필수 |
| A02 | 로그인 | 이메일/비밀번호 기반 로그인 | 필수 |
| A03 | 로그아웃 | 세션 종료 및 토큰 무효화 | 필수 |
| A04 | Google 소셜 로그인 | Google OAuth 2.0 연동 로그인 | 선택 |
| A05 | 비밀번호 변경 | 로그인 상태에서 비밀번호 변경 | 필수 |
| A06 | 비밀번호 재설정 | 이메일 인증을 통한 비밀번호 재설정 | 선택 |
| A07 | 사용자 정보 조회 | 현재 로그인한 사용자 정보 조회 | 필수 |
<br>

### 1.2 기술적 요구사항

| 요구사항 ID | 요구사항 | 구현 방법 | 관련 기능 |
|-------------|----------|-----------|-----------|
| AT01 | 토큰 기반 인증 | dj-rest-auth 라이브러리 사용 | A01-A07 |
| AT02 | OAuth 2.0 연동 | django-allauth + Google OAuth 2.0 | A04 |
| AT03 | 비밀번호 암호화 | Django 기본 PBKDF2 해싱 | A01, A05, A06 |
| AT04 | 세션 관리 | Token 기반 인증 (dj-rest-auth) | A02, A03 |
| AT05 | API 엔드포인트 | `/api/v1/accounts/` prefix | A01-A07 |
| AT06 | 입력 검증 | Serializer 레벨 검증 | A01-A07 |
<br>

### 1.3 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 | 관련 기능 |
|-------------|----------|------|-----------|
| AN01 | 사용자 친화적 오류 메시지 | 회원가입/로그인 실패 시 명확한 메시지 제공 | A01, A02 |
| AN02 | 개인정보 보호 | 비밀번호 평문 저장 금지, 암호화 필수 | A01, A05 |
| AN03 | 소셜 로그인 간편성 | Google 계정으로 원클릭 가입/로그인 | A04 |
| AN04 | 접근성 | 비로그인 사용자도 일부 콘텐츠 열람 가능 | - |

<br>
<br>

## 2. 마이페이지 (Mypage)

### 2.1 기능 목록

| 기능 ID | 기능명 | 기능 설명 | 우선순위 |
|---------|--------|-----------|----------|
| M01 | 대시보드 통계 | 학습 현황 요약 (수강중/완료/찜/리뷰 수) | 필수 |
| M02 | 최근 학습 강좌 | 최근 학습한 강좌 조회 (이어듣기) | 선택 |
| M03 | 수강 강좌 목록 | 수강중/완료 강좌 목록 조회 및 필터링 | 필수 |
| M04 | 수강 상태 상세 | 특정 강좌의 수강 상세 정보 조회 | 필수 |
| M05 | 수강평 관리 | 수강평 등록/수정/삭제 | 필수 |
| M06 | 위시리스트 관리 | 관심 강좌 추가/삭제/조회 | 필수 |
| M07 | 커뮤니티 활동 통계 | 작성 글/댓글/스크랩/받은 좋아요 수 | 필수 |
| M08 | 내가 쓴 글 목록 | 커뮤니티에 작성한 게시글 목록 | 필수 |
| M09 | 내가 쓴 댓글 목록 | 커뮤니티에 작성한 댓글 목록 | 필수 |
| M10 | 스크랩 목록 | 스크랩한 게시글 목록 조회 | 필수 |
| M11 | 프로필 관리 | 내 정보 조회/수정 (이름, 이메일, 마케팅 동의) | 선택 |
<br>

### 2.2 기술적 요구사항

| 요구사항 ID | 요구사항 | 구현 방법 | 관련 기능 |
|-------------|----------|-----------|-----------|
| MT01 | 인증 필수 | IsAuthenticated 권한 클래스 적용 | M01-M11 |
| MT02 | N+1 쿼리 방지 | select_related, prefetch_related 활용 | M01-M11 |
| MT03 | DB 레벨 집계 | aggregate, annotate 활용 | M01, M07 |
| MT04 | 페이지네이션 | DRF 기본 페이지네이션 적용 | M03, M08-M10 |
| MT05 | 수강평 최소 길이 | 100자 이상 (Serializer 검증) | M05 |
| MT06 | 평점 범위 검증 | 1~5 범위 (Serializer 검증) | M05 |
| MT07 | 중복 방지 | UniqueConstraint (user, course) | M05, M06 |
| MT08 | 정렬 최적화 | DB 인덱스 활용 (last_studied_at, created_at) | M02, M03 |
<br>

### 2.3 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 | 관련 기능 |
|-------------|----------|------|-----------|
| MN01 | 직관적인 대시보드 | 주요 통계를 한눈에 파악 가능 | M01 |
| MN02 | 이어듣기 편의성 | 최근 학습 강좌 바로가기 제공 | M02 |
| MN03 | 수강평 품질 관리 | 최소 100자 이상 작성 유도 | M05 |
| MN04 | 위시리스트 간편성 | 원클릭 추가/삭제 | M06 |
| MN05 | 개인정보 보호 | 본인 데이터만 조회/수정 가능 | M01-M11 |
| MN06 | 마케팅 동의 관리 | 마케팅 수신 동의 여부 선택 가능 | M11 |

<br>
<br>


## 3. 커뮤니티 (Community)

### 3.1 기능 목록

| 기능 ID | 기능명 | 기능 설명 | 우선순위 |
|---------|--------|-----------|----------|
| C01 | 게시판 목록 조회 | 전체 게시판 목록 및 게시글 수 조회 | 필수 |
| C02 | 게시글 목록 조회 | 특정 게시판의 게시글 목록 조회 (ID/이름 기준) | 필수 |
| C03 | 게시글 작성 | 특정 게시판에 게시글 작성 | 필수 |
| C04 | 게시글 상세 조회 | 게시글 내용, 댓글, 좋아요 수 등 조회 | 필수 |
| C05 | 게시글 수정/삭제 | 작성자만 게시글 수정/삭제 가능 | 필수 |
| C06 | 게시글 검색 | 제목/내용 기준 검색, 게시판 필터링 | 선택 |
| C07 | 댓글 조회 | 최상위 댓글 및 대댓글 트리 조회 | 필수 |
| C08 | 댓글 작성 | 댓글/대댓글 작성 | 필수 |
| C09 | 댓글 수정/삭제 | 작성자만 댓글 수정/삭제 가능 | 선택 |
| C10 | 좋아요 토글 | 게시글 좋아요 추가/취소 | 필수 |
| C11 | 스크랩 토글 | 게시글 스크랩 추가/취소 | 필수 |
<br>

### 3.2 기술적 요구사항

| 요구사항 ID | 요구사항 | 구현 방법 | 관련 기능 |
|-------------|----------|-----------|-----------|
| CT01 | 읽기 공개, 쓰기 인증 | IsAuthenticatedOrReadOnly 권한 | C01-C09 |
| CT02 | 작성자 권한 검증 | IsOwnerOrReadOnly 커스텀 권한 | C05, C09 |
| CT03 | N+1 쿼리 방지 | select_related, prefetch_related, annotate | C01-C11 |
| CT04 | 댓글 트리 구조 | parent FK를 통한 재귀 구조 | C07, C08 |
| CT05 | Prefetch 최적화 | 대댓글까지 한 번에 로드 | C04, C07 |
| CT06 | 검색 정규화 | 공백 제거, 키워드 분리 (AND 조건) | C06 |
| CT07 | 좋아요 ManyToMany | User-Post 다대다 관계 | C10 |
| CT08 | 스크랩 중복 방지 | UniqueConstraint (user, post) | C11 |
| CT09 | 사용자별 상태 제공 | is_liked, is_scrapped (Subquery/Exists) | C04 |
<br>

### 3.3 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 | 관련 기능 |
|-------------|----------|------|-----------|
| CN01 | 비로그인 사용자 열람 | 로그인 없이도 게시글 조회 가능 | C01, C02, C04, C06 |
| CN02 | 작성자 권한 보호 | 본인 게시글/댓글만 수정/삭제 가능 | C05, C09 |
| CN03 | 검색 편의성 | 다중 키워드 검색 지원 | C06 |
| CN04 | 대댓글 지원 | 댓글에 대한 답글 작성 가능 | C08 |
| CN05 | 좋아요 UX | 토글 방식으로 추가/취소 간편화 | C10 |
| CN06 | 스크랩 UX | 토글 방식으로 추가/취소 간편화 | C11 |
| CN07 | 최신순 정렬 | 게시글/댓글 최신순 기본 정렬 | C02, C04, C07 |

<br>
<br>


## 4. 강좌 (Courses)

### 4.1 기능 목록

| 기능 ID | 기능명 | 기능 설명 | 우선순위 |
|---------|--------|-----------|----------|
| CO01 | 강좌 목록 조회 | 전체 강좌 목록 조회 (페이지네이션) | 필수 |
| CO02 | 강좌 검색 | 강좌명/소개 기준 검색 | 필수 |
| CO03 | 강좌 필터링 | 대분류/중분류/기관/교수 필터링 | 필수 |
| CO04 | 강좌 정렬 | 평점/리뷰수/최신순/이름순 정렬 | 선택 |
| CO05 | 강좌 상세 조회 | 강좌 상세 정보 조회 | 필수 |
| CO06 | 리뷰 목록 조회 | 특정 강좌의 리뷰 목록 조회 | 필수 |
| CO07 | 추천 강좌 조회 | ElasticSearch 기반 유사 강좌 추천 | 핵심 |
| CO08 | 강좌 중복 제거 | 동일 강좌의 다른 기수 중 최신만 표시 | 선택 |
<br>

### 4.2 기술적 요구사항

| 요구사항 ID | 요구사항 | 구현 방법 | 관련 기능 |
|-------------|----------|-----------|-----------|
| COT01 | 비인증 접근 허용 | AllowAny 권한 클래스 | CO01-CO08 |
| COT02 | 평균 평점 계산 | annotate + Avg + Coalesce | CO01, CO04 |
| COT03 | 리뷰 수 집계 | annotate + Count (distinct=True) | CO01, CO04 |
| COT04 | 중복 제거 로직 | Subquery로 최신 study_start 필터링 | CO08 |
| COT05 | 검색 최적화 | Q 객체 + 키워드 토큰화 (AND 조건) | CO02 |
| COT06 | 필터링 화이트리스트 | 허용된 필터만 적용 | CO03 |
| COT07 | 정렬 화이트리스트 | 허용된 정렬 키만 적용 | CO04 |
| COT08 | 페이지네이션 | 기본 10개, 최대 100개 | CO01 |
| COT09 | ElasticSearch 연동 | KNN 검색 (embedding 벡터) | CO07 |
| COT10 | 추천 중복 제거 | 이름+교수 기준 중복 제거 | CO07 |
<br>

### 4.3 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 | 관련 기능 |
|-------------|----------|------|-----------|
| CON01 | 비로그인 접근 | 모든 사용자가 강좌 정보 열람 가능 | CO01-CO08 |
| CON02 | 검색 편의성 | 다중 키워드 검색 지원 | CO02 |
| CON03 | 필터링 조합 | 여러 필터 동시 적용 가능 | CO03 |
| CON04 | 기본 정렬 | 평점 높은순 기본 정렬 | CO04 |
| CON05 | 추천 정확도 | 임베딩 기반 유사도 추천 | CO07 |
| CON06 | 중복 방지 | 같은 강좌의 다른 기수는 최신만 표시 | CO08 |
| CON07 | 페이지 크기 조정 | 사용자가 페이지 크기 선택 가능 | CO01 |

<br>
<br>


## 5. 강좌 비교 및 AI 분석 (Comparisons)

### 5.1 기능 목록

| 기능 ID | 기능명 | 기능 설명 | 우선순위 |
|---------|--------|-----------|----------|
| CP01 | 강좌 비교 분석 | 여러 강좌를 비교하여 매칭 점수 제공 | 핵심 |
| CP02 | 매칭 점수 계산 | 사용자 선호도 기반 강좌 매칭 점수 산출 | 핵심 |
| CP03 | 감성분석 | 강좌 리뷰의 긍정/부정 비율 분석 | 핵심 |
| CP04 | 타임라인 시뮬레이션 | 주당 학습 시간 기반 수강 일정 예측 | 핵심 |
| CP05 | AI 맞춤 코멘트 | LLM 기반 개인화 추천 코멘트 생성 | 핵심 |
| CP06 | 리뷰 요약 | LLM 기반 강좌 리뷰 요약 생성 | 핵심 |
| CP07 | AI 평가 조회 | 강좌별 LLM 생성 평가 정보 조회 | 핵심 |
| CP08 | 감성분석 조회 | 강좌별 감성분석 결과 독립 조회 | 선택 |
<br>

### 5.2 기술적 요구사항

| 요구사항 ID | 요구사항 | 구현 방법 | 관련 기능 |
|-------------|----------|-----------|-----------|
| CPT01 | 인증 필수 | IsAuthenticated (비교 분석은 로그인 필요) | CP01-CP06 |
| CPT02 | Services 계층 분리 | 비즈니스 로직을 별도 서비스로 분리 | CP01-CP08 |
| CPT03 | LLM 연동 | OpenAI API 또는 Claude API 연동 | CP05, CP06 |
| CPT04 | AI 평가 1:1 관계 | Course-CourseAIReview OneToOne | CP07 |
| CPT05 | 감성분석 처리 | KoNLPy 또는 사전 학습 모델 활용 | CP03, CP08 |
| CPT06 | 매칭 점수 알고리즘 | 난이도/학습량/전문성 가중치 계산 | CP02 |
| CPT07 | 타임라인 알고리즘 | 주당 학습 시간 기반 완강 예측 | CP04 |
| CPT08 | LLM 오류 처리 | graceful fallback (기본 메시지 제공) | CP05, CP06 |
| CPT09 | 결과 정렬 | 매칭 점수 내림차순 정렬 | CP01 |
| CPT10 | 비인증 접근 (일부) | 감성분석은 비로그인 허용 | CP08 |
<br>

### 5.3 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 | 관련 기능 |
|-------------|----------|------|-----------|
| CPN01 | 개인화 추천 | 사용자 목표와 선호도 반영 | CP01, CP02, CP05 |
| CPN02 | 비교 결과 명확성 | 매칭 점수 기준 순위 제공 | CP01 |
| CPN03 | 리뷰 신뢰도 표시 | 리뷰 개수 기반 신뢰도 지표 제공 | CP03, CP06 |
| CPN04 | 학습 계획 지원 | 주당 학습 시간 입력 시 완강 예측 | CP04 |
| CPN05 | AI 코멘트 품질 | LLM 기반 자연어 추천 이유 제공 | CP05 |
| CPN06 | 리뷰 요약 품질 | 장점/단점 구분하여 요약 제공 | CP06 |
| CPN07 | 오류 대응 | LLM 오류 시에도 기본 정보 제공 | CP05, CP06 |
| CPN08 | 비교 강좌 수 제한 | 2~4개 강좌 비교 권장 | CP01 |

<br>
<br>


## 6. 시스템 공통 요구사항

### 6.1 기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 |
|-------------|----------|------|
| ST01 | RESTful API 설계 | 표준 HTTP 메소드 사용 (GET, POST, PUT, PATCH, DELETE) |
| ST02 | JSON 응답 포맷 | 모든 API는 JSON 형식으로 응답 |
| ST03 | 에러 처리 표준화 | 일관된 에러 응답 형식 (detail, status code) |
| ST04 | CORS 설정 | 프론트엔드 도메인 CORS 허용 |
| ST05 | DB 쿼리 최적화 | N+1 방지 (select_related, prefetch_related) |
| ST06 | 페이지네이션 | 대용량 데이터 처리 시 페이지네이션 필수 |
| ST07 | 입력 검증 | Serializer 레벨 검증 (필수 필드, 형식, 범위 등) |
| ST08 | 로깅 | 주요 동작 및 에러 로깅 |
| ST09 | API 문서화 | Swagger/ReDoc 자동 생성 (drf-spectacular) |
| ST10 | 버전 관리 | API 버전 prefix (`/api/v1/`) |
<br>

### 6.2 비기술적 요구사항

| 요구사항 ID | 요구사항 | 설명 |
|-------------|----------|------|
| SN01 | 사용자 경험 일관성 | 모든 기능에서 일관된 UX 패턴 유지 |
| SN02 | 응답 속도 | API 응답 시간 1초 이내 (LLM 제외) |
| SN03 | 접근성 | 비로그인 사용자도 일부 콘텐츠 접근 가능 |
| SN04 | 데이터 무결성 | 중복 방지, 참조 무결성 유지 |
| SN05 | 보안 | 인증 필요 기능 강제, SQL Injection 방지 |
| SN06 | 확장성 | 향후 기능 추가를 고려한 설계 |
| SN07 | 오류 메시지 명확성 | 사용자가 이해하기 쉬운 오류 메시지 |
| SN08 | 테스트 가능성 | 단위 테스트 및 통합 테스트 작성 가능 구조 |

<br>
<br>

## 7. 기술 스택 요약

| 분류 | 기술 | 용도 |
|------|------|------|
| 백엔드 프레임워크 | Django 5.2 | 웹 애플리케이션 프레임워크 |
| REST API | Django REST Framework | API 구축 |
| 인증 | dj-rest-auth, django-allauth | 토큰 인증, 소셜 로그인 |
| 데이터베이스 | PostgreSQL (추정) | 관계형 데이터베이스 |
| 검색 엔진 | ElasticSearch | 강좌 추천 (KNN) |
| AI | OpenAI API | LLM 기반 코멘트, 리뷰 요약 |
| AI | AIOps | 프롬프트, 모델명 버전 관리 및 성능 모니터링 |
| ML | MLOps | 모델 학습, 평가 커맨드 생성 및 버전 관리 및 성능 모니터링 |
| 감성분석 | sk-learn | 리뷰 감성분석 |
| API 문서화 | drf-spectacular | Swagger/ReDoc 자동 생성 |

<br>
<br>

## 8. 참고사항

### 8.1 설계 원칙

1. **관심사 분리**: Views는 요청/응답 처리, Services는 비즈니스 로직, Models는 데이터 구조
2. **DRY 원칙**: 공통 로직은 Services, Utils로 분리
3. **명확한 네이밍**: 기능별 일관된 네이밍 규칙
4. **방어적 프로그래밍**: 입력 검증, 예외 처리 철저
5. **성능 최적화**: N+1 쿼리 방지, 적절한 인덱싱, 캐싱 고려

<br>

### 8.2 향후 기술적 개선 방향

1. **캐싱 도입**: Redis를 활용한 자주 조회되는 데이터 캐싱
2. **비동기 처리**: Celery를 활용한 LLM 호출 비동기 처리
3. **부하 테스트**: Locust 등을 활용한 성능 테스트
4. **CI/CD**: GitHub Actions를 활용한 자동 배포
5. **Airflow**: Airflow를 통한 데이터 적재 자동화 도입
6. **AIOps 및 MLOps** : MLFlow / Grafana를 이용하여 버전 관리 및 성능 모니터링 도입

